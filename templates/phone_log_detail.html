{% extends "base.html" %}

{% block content %}
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
    <h2>Phone Log Details</h2>
    <div>
        <a href="{{ url_for('phone_log_edit', id=log.id) }}" class="btn btn-primary">Edit</a>
        <a href="{{ url_for('phone_logs') }}" class="btn btn-secondary">Back to Logs</a>
    </div>
</div>

<div class="card">
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem; margin-bottom: 1.5rem;">
        <div>
            <p><strong>Date:</strong> {{ log.created_at.strftime('%B %d, %Y at %I:%M %p') }}</p>
            <p><strong>Status:</strong> 
                <span class="badge badge-{{ 'success' if log.status == 'resolved' else 'warning' }}">
                    {{ log.status.upper() }}
                </span>
            </p>
            <p><strong>Follow-up Needed:</strong> {{ 'Yes' if log.follow_up_needed else 'No' }}</p>
        </div>
        <div>
            <p><strong>Caller Name:</strong> {{ log.caller_name or 'Not provided' }}</p>
            <p><strong>Phone Number:</strong> {{ log.caller_phone or 'Not provided' }}</p>
            <p><strong>Logged By:</strong> {{ log.creator.username if log.creator else 'Unknown' }}</p>
        </div>
    </div>
    
    <hr>
    
    <div style="margin-bottom: 1.5rem;">
        <h3 style="margin-bottom: 0.5rem;">Issue / Reason for Call</h3>
        <div style="background-color: #f8f9fa; padding: 1rem; border-radius: 4px; white-space: pre-wrap;">{{ log.issue }}</div>
    </div>
    
    {% if log.action_taken %}
    <div style="margin-bottom: 1.5rem;">
        <h3 style="margin-bottom: 0.5rem;">Action Taken</h3>
        <div style="background-color: #f8f9fa; padding: 1rem; border-radius: 4px; white-space: pre-wrap;">{{ log.action_taken }}</div>
    </div>
    {% endif %}
    
    {% if log.resolved_at %}
    <div>
        <p><strong>Resolved Date:</strong> {{ log.resolved_at.strftime('%B %d, %Y at %I:%M %p') }}</p>
    </div>
    {% endif %}
</div>

<style>
.badge {
    display: inline-block;
    padding: 0.25rem 0.75rem;
    border-radius: 12px;
    font-size: 0.875rem;
    font-weight: bold;
}
.badge-success {
    background-color: #d4edda;
    color: #155724;
}
.badge-warning {
    background-color: #fff3cd;
    color: #856404;
}
</style>
{% endblock %}