{% extends "base.html" %}

{% block content %}
<h2>Time Clock History</h2>

<table class="data-table">
    <thead>
        <tr>
            {% if current_user.role == 'admin' %}
            <th>User</th>
            {% endif %}
            <th>Clock In</th>
            <th>Clock Out</th>
            <th>Hours</th>
        </tr>
    </thead>
    <tbody>
        {% for entry in pagination.items %}
        <tr>
            {% if current_user.role == 'admin' %}
            <td>{{ entry.user.username }}</td>
            {% endif %}
            <td>{{ entry.clock_in.strftime('%Y-%m-%d %I:%M %p') }}</td>
            <td>
                {% if entry.clock_out %}
                    {{ entry.clock_out.strftime('%Y-%m-%d %I:%M %p') }}
                {% else %}
                    <span style="color: #27ae60; font-weight: bold;">Active</span>
                {% endif %}
            </td>
            <td>{{ entry.total_hours if entry.total_hours else '-' }}</td>
        </tr>
        {% else %}
        <tr><td colspan="{{ '4' if current_user.role == 'admin' else '3' }}" style="text-align: center;">No time entries found</td></tr>
        {% endfor %}
    </tbody>
</table>

<!-- Pagination -->
{% if pagination.pages > 1 %}
<div class="pagination">
    {% if pagination.has_prev %}
        <a href="{{ url_for('clock_history', page=pagination.prev_num) }}" class="btn btn-secondary">« Previous</a>
    {% endif %}
    
    <span style="padding: 0.5rem 1rem;">
        Page {{ pagination.page }} of {{ pagination.pages }}
    </span>
    
    {% if pagination.has_next %}
        <a href="{{ url_for('clock_history', page=pagination.next_num) }}" class="btn btn-secondary">Next »</a>
    {% endif %}
</div>
{% endif %}

<style>
.pagination {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 1rem;
    margin-top: 1.5rem;
}
</style>
{% endblock %}